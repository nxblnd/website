---
interface Props {
    start: Date | string;
    end?: Date | string;
    locale?: string;
    dateOptions?: Intl.DateTimeFormatOptions;
}

const defaultDateOptions: Intl.DateTimeFormatOptions = {
    year: "numeric",
    month: "numeric",
    day: "numeric",
};

let { start, end, locale, dateOptions = defaultDateOptions } = Astro.props;

if (!(start instanceof Date)) {
    start = new Date(start);
}

if (!(end instanceof Date)) {
    end = new Date(end ?? start);
}

const startDateString = start.toLocaleDateString(locale, dateOptions).replace(/ г\./, "");
const endDateString = end.toLocaleDateString(locale, dateOptions).replace(/ г\./, "");
---

{
    startDateString === endDateString ? (
        <time datetime={startDateString}>{startDateString}</time>
    ) : (
        // prettier-ignore
        <>
            <time datetime={startDateString}>{startDateString}</time>&hairsp;&ndash;&hairsp;<time datetime={endDateString}>{endDateString}</time>
        </>
    )
}
